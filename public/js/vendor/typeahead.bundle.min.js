/*
 * typeahead.js 0.10.2
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(b){var r={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(t){return !t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return typeof t==="string"},isNumber:function(t){return typeof t==="number"},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(t){return typeof t==="undefined"},bind:b.proxy,each:function(v,t){b.each(v,u);function u(w,x){return t(x,w)}},map:b.map,filter:b.grep,every:function(u,v){var t=true;if(!u){return t}b.each(u,function(w,x){if(!(t=v.call(null,x,w,u))){return false}});return !!t},some:function(u,v){var t=false;if(!u){return t}b.each(u,function(w,x){if(t=v.call(null,x,w,u)){return false}});return !!t},mixin:b.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function e(u){return b.isFunction(u)?u:t;function t(){return String(u)}},defer:function(t){setTimeout(t,0)},debounce:function(v,x,u){var w,t;return function(){var B=this,A=arguments,z,y;z=function(){w=null;if(!u){t=v.apply(B,A)}};y=u&&!w;clearTimeout(w);w=setTimeout(z,x);if(y){t=v.apply(B,A)}return t}},throttle:function(y,A){var w,v,z,t,x,u;x=0;u=function(){x=new Date();z=null;t=y.apply(w,v)};return function(){var B=new Date(),C=A-(B-x);w=this;v=arguments;if(C<=0){clearTimeout(z);z=null;x=B;t=y.apply(w,v)}else{if(!z){z=setTimeout(u,C)}}return t}},noop:function(){}};var n="0.10.2";var o=function(u){return{nonword:t,whitespace:v,obj:{nonword:w(t),whitespace:w(v)}};function v(x){return x.split(/\s+/)}function t(x){return x.split(/\W+/)}function w(y){return function x(z){return function A(B){return y(B[z])}}}}();var d=function(){function u(A){this.maxSize=A||100;this.size=0;this.hash={};this.list=new x()}r.mixin(u.prototype,{set:function z(A,D){var C=this.list.tail,B;if(this.size>=this.maxSize){this.list.remove(C);delete this.hash[C.key]}if(B=this.hash[A]){B.val=D;this.list.moveToFront(B)}else{B=new v(A,D);this.list.add(B);this.hash[A]=B;this.size++}},get:function w(A){var B=this.hash[A];if(B){this.list.moveToFront(B);return B.val}}});function x(){this.head=this.tail=null}r.mixin(x.prototype,{add:function y(A){if(this.head){A.next=this.head;this.head.prev=A}this.head=A;this.tail=this.tail||A},remove:function t(A){A.prev?A.prev.next=A.next:this.head=A.next;A.next?A.next.prev=A.prev:this.tail=A.prev},moveToFront:function(A){this.remove(A);this.add(A)}});function v(A,B){this.key=A;this.val=B;this.prev=this.next=null}return u}();var p=function(){var t,u;try{t=window.localStorage;t.setItem("~~~","!");t.removeItem("~~~")}catch(y){t=null}function w(A){this.prefix=["__",A,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(t&&window.JSON){u={_prefix:function(A){return this.prefix+A},_ttlKey:function(A){return this._prefix(A)+this.ttlKey},get:function(A){if(this.isExpired(A)){this.remove(A)}return z(t.getItem(this._prefix(A)))},set:function(B,C,A){if(r.isNumber(A)){t.setItem(this._ttlKey(B),x(v()+A))}else{t.removeItem(this._ttlKey(B))}return t.setItem(this._prefix(B),x(C))},remove:function(A){t.removeItem(this._ttlKey(A));t.removeItem(this._prefix(A));return this},clear:function(){var C,B,D=[],A=t.length;for(C=0;C<A;C++){if((B=t.key(C)).match(this.keyMatcher)){D.push(B.replace(this.keyMatcher,""))}}for(C=D.length;C--;){this.remove(D[C])}return this},isExpired:function(B){var A=z(t.getItem(this._ttlKey(B)));return r.isNumber(A)&&v()>A?true:false}}}else{u={get:r.noop,set:r.noop,remove:r.noop,clear:r.noop,isExpired:r.noop}}r.mixin(w.prototype,u);return w;function v(){return new Date().getTime()}function x(A){return JSON.stringify(r.isUndefined(A)?null:A)}function z(A){return JSON.parse(A)}}();var q=function(){var v=0,w={},t=6,z=new d(10);function A(B){B=B||{};this._send=B.transport?x(B.transport):b.ajax;this._get=B.rateLimiter?B.rateLimiter(this._get):this._get}A.setMaxPendingRequests=function u(B){t=B};A.resetCache=function y(){z=new d(10)};r.mixin(A.prototype,{_get:function(F,I,C){var H=this,G;if(G=w[F]){G.done(E).fail(D)}else{if(v<t){v++;w[F]=this._send(F,I).done(E).fail(D).always(B)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function E(J){C&&C(null,J);z.set(F,J)}function D(){C&&C(true)}function B(){v--;delete w[F];if(H.onDeckRequestArgs){H._get.apply(H,H.onDeckRequestArgs);H.onDeckRequestArgs=null}}},get:function(C,E,B){var D;if(r.isFunction(E)){B=E;E={}}if(D=z.get(C)){r.defer(function(){B&&B(null,D)})}else{this._get(C,E,B)}return !!D}});return A;function x(B){return function C(E,H){var D=b.Deferred();B(E,H,G,F);return D;function G(I){r.defer(function(){D.resolve(I)})}function F(I){r.defer(function(){D.reject(I)})}}}}();var j=function(){function t(C){C=C||{};if(!C.datumTokenizer||!C.queryTokenizer){b.error("datumTokenizer and queryTokenizer are both required")}this.datumTokenizer=C.datumTokenizer;this.queryTokenizer=C.queryTokenizer;this.reset()}r.mixin(t.prototype,{bootstrap:function v(C){this.datums=C.datums;this.trie=C.trie},add:function(D){var C=this;D=r.isArray(D)?D:[D];r.each(D,function(E){var G,F;G=C.datums.push(E)-1;F=x(C.datumTokenizer(E));r.each(F,function(H){var K,J,I;K=C.trie;J=H.split("");while(I=J.shift()){K=K.children[I]||(K.children[I]=A());K.ids.push(G)}})})},get:function u(E){var C=this,F,D;F=x(this.queryTokenizer(E));r.each(F,function(G){var K,J,I,H;if(D&&D.length===0){return false}K=C.trie;J=G.split("");while(K&&(I=J.shift())){K=K.children[I]}if(K&&J.length===0){H=K.ids.slice(0);D=D?y(D,H):H}else{D=[];return false}});return D?r.map(w(D),function(G){return C.datums[G]}):[]},reset:function z(){this.datums=[];this.trie=A()},serialize:function B(){return{datums:this.datums,trie:this.trie}}});return t;function x(C){C=r.filter(C,function(D){return !!D});C=r.map(C,function(D){return D.toLowerCase()});return C}function A(){return{ids:[],children:{}}}function w(F){var C={},E=[];for(var D=0;D<F.length;D++){if(!C[F[D]]){C[F[D]]=true;E.push(F[D])}}return E}function y(F,D){var C=0,E=0,H=[];F=F.sort(G);D=D.sort(G);while(C<F.length&&E<D.length){if(F[C]<D[E]){C++}else{if(F[C]>D[E]){E++}else{H.push(F[C]);C++;E++}}}return H;function G(J,I){return J-I}}}();var g=function(){return{local:v,prefetch:t,remote:u};function v(w){return w.local||null}function t(y){var x,w;w={url:null,thumbprint:"",ttl:24*60*60*1000,filter:null,ajax:{}};if(x=y.prefetch||null){x=r.isString(x)?{url:x}:x;x=r.mixin(w,x);x.thumbprint=n+x.thumbprint;x.ajax.type=x.ajax.type||"GET";x.ajax.dataType=x.ajax.dataType||"json";!x.url&&b.error("prefetch requires url to be set")}return x}function u(A){var y,z;z={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(y=A.remote||null){y=r.isString(y)?{url:y}:y;y=r.mixin(z,y);y.rateLimiter=/^throttle$/i.test(y.rateLimitBy)?x(y.rateLimitWait):w(y.rateLimitWait);y.ajax.type=y.ajax.type||"GET";y.ajax.dataType=y.ajax.dataType||"json";delete y.rateLimitBy;delete y.rateLimitWait;!y.url&&b.error("remote requires url to be set")}return y;function w(B){return function(C){return r.debounce(C,B)}}function x(B){return function(C){return r.throttle(C,B)}}}}();(function(E){var t,z;t=E.Bloodhound;z={data:"data",protocol:"protocol",thumbprint:"thumbprint"};E.Bloodhound=v;function v(L){if(!L||!L.local&&!L.prefetch&&!L.remote){b.error("one of local, prefetch, or remote is required")}this.limit=L.limit||5;this.sorter=C(L.sorter);this.dupDetector=L.dupDetector||B;this.local=g.local(L);this.prefetch=g.prefetch(L);this.remote=g.remote(L);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new j({datumTokenizer:L.datumTokenizer,queryTokenizer:L.queryTokenizer});this.storage=this.cacheKey?new p(this.cacheKey):null}v.noConflict=function K(){E.Bloodhound=t;return v};v.tokenizers=o;r.mixin(v.prototype,{_loadPrefetch:function w(P){var M=this,O,L;if(O=this._readFromStorage(P.thumbprint)){this.index.bootstrap(O);L=b.Deferred().resolve()}else{L=b.ajax(P.url,P.ajax).done(N)}return L;function N(Q){M.clear();M.add(P.filter?P.filter(Q):Q);M._saveToStorage(M.index.serialize(),P.thumbprint,P.ttl)}},_getFromRemote:function y(Q,L){var P=this,N,O;Q=Q||"";O=encodeURIComponent(Q);N=this.remote.replace?this.remote.replace(this.remote.url,Q):this.remote.url.replace(this.remote.wildcard,O);return this.transport.get(N,this.remote.ajax,M);function M(R,S){R?L([]):L(P.remote.filter?P.remote.filter(S):S)}},_saveToStorage:function F(N,M,L){if(this.storage){this.storage.set(z.data,N,L);this.storage.set(z.protocol,location.protocol,L);this.storage.set(z.thumbprint,M,L)}},_readFromStorage:function J(M){var L={},N;if(this.storage){L.data=this.storage.get(z.data);L.protocol=this.storage.get(z.protocol);L.thumbprint=this.storage.get(z.thumbprint)}N=L.thumbprint!==M||L.protocol!==location.protocol;return L.data&&!N?L.data:null},_initialize:function u(){var O=this,N=this.local,L;L=this.prefetch?this._loadPrefetch(this.prefetch):b.Deferred().resolve();N&&L.done(M);this.transport=this.remote?new q(this.remote):null;return this.initPromise=L.promise();function M(){O.add(r.isFunction(N)?N():N)}},initialize:function u(L){return !this.initPromise||L?this._initialize():this.initPromise},add:function A(L){this.index.add(L)},get:function H(P,L){var N=this,O=[],M=false;O=this.index.get(P);O=this.sorter(O).slice(0,this.limit);if(O.length<this.limit&&this.transport){M=this._getFromRemote(P,Q)}if(!M){(O.length>0||!this.transport)&&L&&L(O)}function Q(S){var R=O.slice(0);r.each(S,function(U){var T;T=r.some(R,function(V){return N.dupDetector(U,V)});!T&&R.push(U);return R.length<N.limit});L&&L(N.sorter(R))}},clear:function D(){this.index.reset()},clearPrefetchCache:function x(){this.storage&&this.storage.clear()},clearRemoteCache:function G(){this.transport&&q.resetCache()},ttAdapter:function I(){return r.bind(this.get,this)}});return v;function C(M){return r.isFunction(M)?L:N;function L(O){return O.sort(M)}function N(O){return O}}function B(){return false}})(this);var i={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'};var h={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(r.isMsie()){r.mixin(h.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(r.isMsie()&&r.isMsie()<=7){r.mixin(h.input,{marginTop:"-1px"})}var a=function(){var u="typeahead:";function t(v){if(!v||!v.el){b.error("EventBus initialized without el")}this.$el=b(v.el)}r.mixin(t.prototype,{trigger:function(w){var v=[].slice.call(arguments,1);this.$el.trigger(u+w,v)}});return t}();var f=function(){var v=/\s+/,z=t();return{onSync:A,onAsync:u,off:w,trigger:x};function B(H,F,D,E){var G;if(!D){return this}F=F.split(v);D=E?C(D,E):D;this._callbacks=this._callbacks||{};while(G=F.shift()){this._callbacks[G]=this._callbacks[G]||{sync:[],async:[]};this._callbacks[G][H].push(D)}return this}function u(F,D,E){return B.call(this,"async",F,D,E)}function A(F,D,E){return B.call(this,"sync",F,D,E)}function w(D){var E;if(!this._callbacks){return this}D=D.split(v);while(E=D.shift()){delete this._callbacks[E]}return this}function x(E){var F,G,D,H,I;if(!this._callbacks){return this}E=E.split(v);D=[].slice.call(arguments,1);while((F=E.shift())&&(G=this._callbacks[F])){H=y(G.sync,this,[F].concat(D));I=y(G.async,this,[F].concat(D));H()&&z(I)}return this}function y(G,F,E){return D;function D(){var I;for(var H=0;!I&&H<G.length;H+=1){I=G[H].apply(F,E)===false}return !I}}function t(){var E;if(window.setImmediate){E=function F(G){setImmediate(function(){G()})}}else{E=function D(G){setTimeout(function(){G()},0)}}return E}function C(E,D){return E.bind?E.bind(D):function(){E.apply(D,[].slice.call(arguments,0))}}}();var c=function(w){var v={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function u(A){var x;A=r.mixin({},v,A);if(!A.node||!A.pattern){return}A.pattern=r.isArray(A.pattern)?A.pattern:[A.pattern];x=t(A.pattern,A.caseSensitive,A.wordsOnly);y(A.node,z);function z(D){var C,B;if(C=x.exec(D.data)){wrapperNode=w.createElement(A.tagName);A.className&&(wrapperNode.className=A.className);B=D.splitText(C.index);B.splitText(C[0].length);wrapperNode.appendChild(B.cloneNode(true));D.parentNode.replaceChild(wrapperNode,B)}return !!C}function y(E,F){var C,D=3;for(var B=0;B<E.childNodes.length;B++){C=E.childNodes[B];if(C.nodeType===D){B+=F(C)?1:0}else{y(C,F)}}}};function t(z,x,C){var B=[],A;for(var y=0;y<z.length;y++){B.push(r.escapeRegExChars(z[y]))}A=C?"\\b("+B.join("|")+")\\b":"("+B.join("|")+")";return x?new RegExp(A):new RegExp(A,"i")}}(window.document);var l=function(){var P;P={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function M(Y){var W=this,X,T,V,U;Y=Y||{};if(!Y.input){b.error("input is missing")}X=r.bind(this._onBlur,this);T=r.bind(this._onFocus,this);V=r.bind(this._onKeydown,this);U=r.bind(this._onInput,this);this.$hint=b(Y.hint);this.$input=b(Y.input).on("blur.tt",X).on("focus.tt",T).on("keydown.tt",V);if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=r.noop}if(!r.isMsie()){this.$input.on("input.tt",U)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(Z){if(P[Z.which||Z.keyCode]){return}r.defer(r.bind(W._onInput,W,Z))})}this.query=this.$input.val();this.$overflowHelper=F(this.$input)}M.normalizeQuery=function(T){return(T||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};r.mixin(M.prototype,f,{_onBlur:function D(){this.resetInputValue();this.trigger("blurred")},_onFocus:function x(){this.trigger("focused")},_onKeydown:function R(T){var U=P[T.which||T.keyCode];this._managePreventDefault(U,T);if(U&&this._shouldTrigger(U,T)){this.trigger(U+"Keyed",T)}},_onInput:function u(){this._checkInputValue()},_managePreventDefault:function z(X,W){var V,U,T;switch(X){case"tab":U=this.getHint();T=this.getInputValue();V=U&&U!==T&&!G(W);break;case"up":case"down":V=!G(W);break;default:V=false}V&&W.preventDefault()},_shouldTrigger:function S(V,U){var T;switch(V){case"tab":T=!G(U);break;default:T=true}return T},_checkInputValue:function A(){var T,U,V;T=this.getInputValue();U=C(T,this.query);V=U?this.query.length!==T.length:false;if(!U){this.trigger("queryChanged",this.query=T)}else{if(V){this.trigger("whitespaceChanged",this.query)}}},focus:function I(){this.$input.focus()},blur:function N(){this.$input.blur()},getQuery:function K(){return this.query},setQuery:function J(T){this.query=T},getInputValue:function y(){return this.$input.val()},setInputValue:function B(U,T){this.$input.val(U);T?this.clearHint():this._checkInputValue()},resetInputValue:function w(){this.setInputValue(this.query,true)},getHint:function v(){return this.$hint.val()},setHint:function O(T){this.$hint.val(T)},clearHint:function E(){this.setHint("")},clearHintIfInvalid:function t(){var W,V,T,U;W=this.getInputValue();V=this.getHint();T=W!==V&&V.indexOf(W)===0;U=W!==""&&T&&!this.hasOverflow();!U&&this.clearHint()},getLanguageDirection:function H(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function L(){var T=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=T},isCursorAtEnd:function(){var U,V,T;U=this.$input.val().length;V=this.$input[0].selectionStart;if(r.isNumber(V)){return V===U}else{if(document.selection){T=document.selection.createRange();T.moveStart("character",-U);return U===T.text.length}}return true},destroy:function Q(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return M;function F(T){return b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:T.css("font-family"),fontSize:T.css("font-size"),fontStyle:T.css("font-style"),fontVariant:T.css("font-variant"),fontWeight:T.css("font-weight"),wordSpacing:T.css("word-spacing"),letterSpacing:T.css("letter-spacing"),textIndent:T.css("text-indent"),textRendering:T.css("text-rendering"),textTransform:T.css("text-transform")}).insertAfter(T)}function C(U,T){return M.normalizeQuery(U)===M.normalizeQuery(T)}function G(T){return T.altKey||T.ctrlKey||T.metaKey||T.shiftKey}}();var s=function(){var u="ttDataset",I="ttValue",C="ttDatum";function t(J){J=J||{};J.templates=J.templates||{};if(!J.source){b.error("missing source")}if(J.name&&!w(J.name)){b.error("invalid dataset name: "+J.name)}this.query=null;this.highlight=!!J.highlight;this.name=J.name||r.getUniqueId();this.source=J.source;this.displayFn=x(J.display||J.displayKey);this.templates=y(J.templates,this.displayFn);this.$el=b(i.dataset.replace("%CLASS%",this.name))}t.extractDatasetName=function G(J){return b(J).data(u)};t.extractValue=function D(J){return b(J).data(I)};t.extractDatum=function D(J){return b(J).data(C)};r.mixin(t.prototype,f,{_render:function v(P,J){if(!this.$el){return}var O=this,L;this.$el.empty();L=J&&J.length;if(!L&&this.templates.empty){this.$el.html(K()).prepend(O.templates.header?N():null).append(O.templates.footer?M():null)}else{if(L){this.$el.html(Q()).prepend(O.templates.header?N():null).append(O.templates.footer?M():null)}}this.trigger("rendered");function K(){return O.templates.empty({query:P,isEmpty:true})}function Q(){var S,R;S=b(i.suggestions).css(h.suggestions);R=r.map(J,T);S.append.apply(S,R);O.highlight&&c({node:S[0],pattern:P});return S;function T(U){var V;V=b(i.suggestion).append(O.templates.suggestion(U)).data(u,O.name).data(I,O.displayFn(U)).data(C,U);V.children().each(function(){b(this).css(h.suggestionChild)});return V}}function N(){return O.templates.header({query:P,isEmpty:!L})}function M(){return O.templates.footer({query:P,isEmpty:!L})}},getRoot:function E(){return this.$el},update:function z(L){var K=this;this.query=L;this.canceled=false;this.source(L,J);function J(M){if(!K.canceled&&L===K.query){K._render(L,M)}}},cancel:function H(){this.canceled=true},clear:function B(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function A(){return this.$el.is(":empty")},destroy:function F(){this.$el=null}});return t;function x(J){J=J||"value";return r.isFunction(J)?J:K;function K(L){return L[J]}}function y(K,L){return{empty:K.empty&&r.templatify(K.empty),header:K.header&&r.templatify(K.header),footer:K.footer&&r.templatify(K.footer),suggestion:K.suggestion||J};function J(M){return"<p class='needsclick'>"+L(M)+"</p>"}}function w(J){return/^[_a-zA-Z0-9-]+$/.test(J)}}();var m=function(){function M(V){var T=this,R,U,S;V=V||{};if(!V.menu){b.error("menu is required")}this.isOpen=false;this.isEmpty=true;this.datasets=r.map(V.datasets,D);R=r.bind(this._onSuggestionClick,this);U=r.bind(this._onSuggestionMouseEnter,this);S=r.bind(this._onSuggestionMouseLeave,this);this.$menu=b(V.menu).on("click.tt",".tt-suggestion",R).on("mouseenter.tt",".tt-suggestion",U).on("mouseleave.tt",".tt-suggestion",S);r.each(this.datasets,function(W){T.$menu.append(W.getRoot());W.onSync("rendered",T._onRendered,T)})}r.mixin(M.prototype,f,{_onSuggestionClick:function L(R){this.trigger("suggestionClicked",b(R.currentTarget))},_onSuggestionMouseEnter:function t(R){this._removeCursor();this._setCursor(b(R.currentTarget),true)},_onSuggestionMouseLeave:function G(){this._removeCursor()},_onRendered:function z(){this.isEmpty=r.every(this.datasets,R);this.isEmpty?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered");function R(S){return S.isEmpty()}},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function y(){return this.$menu.find(".tt-suggestion")},_getCursor:function w(){return this.$menu.find(".tt-cursor").first()},_setCursor:function O(S,R){S.first().addClass("tt-cursor");!R&&this.trigger("cursorMoved")},_removeCursor:function v(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function u(R){var T,S,V,U;if(!this.isOpen){return}S=this._getCursor();T=this._getSuggestions();this._removeCursor();V=T.index(S)+R;V=(V+1)%(T.length+1)-1;if(V===-1){this.trigger("cursorRemoved");return}else{if(V<-1){V=T.length-1}}this._setCursor(U=T.eq(V));this._ensureVisible(U)},_ensureVisible:function K(U){var R,T,S,V;R=U.position().top;T=R+U.outerHeight(true);S=this.$menu.scrollTop();V=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);if(R<0){this.$menu.scrollTop(S+R)}else{if(V<T){this.$menu.scrollTop(S+(T-V))}}},close:function H(){if(this.isOpen){this.isOpen=false;this._removeCursor();this._hide();this.trigger("closed")}},open:function F(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function P(R){this.$menu.css(R==="ltr"?h.ltr:h.rtl)},moveCursorUp:function A(){this._moveCursor(-1)},moveCursorDown:function Q(){this._moveCursor(+1)},getDatumForSuggestion:function C(S){var R=null;if(S.length){R={raw:s.extractDatum(S),value:s.extractValue(S),datasetName:s.extractDatasetName(S)}}return R},getDatumForCursor:function x(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function J(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function B(R){r.each(this.datasets,S);function S(T){T.update(R)}},empty:function E(){r.each(this.datasets,R);this.isEmpty=true;function R(S){S.clear()}},isVisible:function I(){return this.isOpen&&!this.isEmpty},destroy:function N(){this.$menu.off(".tt");this.$menu=null;r.each(this.datasets,R);function R(S){S.destroy()}}});return M;function D(R){return new s(R)}}();var k=function(){var U="ttAttrs";function E(aa){var Z,ab,Y;aa=aa||{};if(!aa.input){b.error("missing input")}this.isActivated=false;this.autoselect=!!aa.autoselect;this.minLength=r.isNumber(aa.minLength)?aa.minLength:1;this.$node=H(aa.input,aa.withHint);Z=this.$node.find(".tt-dropdown-menu");ab=this.$node.find(".tt-input");Y=this.$node.find(".tt-hint");ab.on("blur.tt",function(ad){var af,ae,ac;af=document.activeElement;ae=Z.is(af);ac=Z.has(af).length>0;if(r.isMsie()&&(ae||ac)){ad.preventDefault();ad.stopImmediatePropagation();r.defer(function(){ab.focus()})}});Z.on("mousedown.tt",function(ac){ac.preventDefault()});this.eventBus=aa.eventBus||new a({el:ab});this.dropdown=new m({menu:Z,datasets:aa.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=new l({input:ab,hint:Y}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}r.mixin(E.prototype,{_onSuggestionClicked:function v(aa,Z){var Y;if(Y=this.dropdown.getDatumForSuggestion(Z)){this._select(Y)}},_onCursorMoved:function P(){var Y=this.dropdown.getDatumForCursor();this.input.setInputValue(Y.value,true);this.eventBus.trigger("cursorchanged",Y.raw,Y.datasetName)},_onCursorRemoved:function y(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function L(){this._updateHint()},_onOpened:function w(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function B(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function N(){this.isActivated=true;this.dropdown.open()},_onBlurred:function O(){this.isActivated=false;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function J(Z,Y){var aa,ab;aa=this.dropdown.getDatumForCursor();ab=this.dropdown.getDatumForTopSuggestion();if(aa){this._select(aa);Y.preventDefault()}else{if(this.autoselect&&ab){this._select(ab);Y.preventDefault()}}},_onTabKeyed:function X(aa,Z){var Y;if(Y=this.dropdown.getDatumForCursor()){this._select(Y);Z.preventDefault()}else{this._autocomplete(true)}},_onEscKeyed:function S(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function u(){var Y=this.input.getQuery();this.dropdown.isEmpty&&Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function z(){var Y=this.input.getQuery();this.dropdown.isEmpty&&Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function W(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function K(){this.dir==="ltr"&&this._autocomplete()},_onQueryChanged:function G(Z,Y){this.input.clearHintIfInvalid();Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function T(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function R(){var Y;if(this.dir!==(Y=this.input.getLanguageDirection())){this.dir=Y;this.$node.css("direction",Y);this.dropdown.setLanguageDirection(Y)}},_updateHint:function M(){var Z,ad,ac,ab,Y,aa;Z=this.dropdown.getDatumForTopSuggestion();if(Z&&this.dropdown.isVisible()&&!this.input.hasOverflow()){ad=this.input.getInputValue();ac=l.normalizeQuery(ad);ab=r.escapeRegExChars(ac);Y=new RegExp("^(?:"+ab+")(.+$)","i");aa=Y.exec(Z.value);aa?this.input.setHint(ad+aa[1]):this.input.clearHint()}else{this.input.clearHint()}},_autocomplete:function V(aa){var ac,ab,Y,Z;ac=this.input.getHint();ab=this.input.getQuery();Y=aa||this.input.isCursorAtEnd();if(ac&&ab!==ac&&Y){Z=this.dropdown.getDatumForTopSuggestion();Z&&this.input.setInputValue(Z.value);this.eventBus.trigger("autocompleted",Z.raw,Z.datasetName)}},_select:function I(Y){this.input.setQuery(Y.value);this.input.setInputValue(Y.value,true);this._setLanguageDirection();this.eventBus.trigger("selected",Y.raw,Y.datasetName);this.dropdown.close();r.defer(r.bind(this.dropdown.empty,this.dropdown))},open:function D(){this.dropdown.open()},close:function F(){this.dropdown.close()},setVal:function t(Y){if(this.isActivated){this.input.setInputValue(Y)}else{this.input.setQuery(Y);this.input.setInputValue(Y,true)}this._setLanguageDirection()},getVal:function C(){return this.input.getQuery()},destroy:function Q(){this.input.destroy();this.dropdown.destroy();x(this.$node);this.$node=null}});return E;function H(Y,ad){var ae,aa,ac,Z;ae=b(Y);aa=b(i.wrapper).css(h.wrapper);ac=b(i.dropdown).css(h.dropdown);Z=ae.clone().css(h.hint).css(A(ae));Z.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",true).attr({autocomplete:"off",spellcheck:"false"});ae.data(U,{dir:ae.attr("dir"),autocomplete:ae.attr("autocomplete"),spellcheck:ae.attr("spellcheck"),style:ae.attr("style")});ae.addClass("tt-input").attr({autocomplete:"off",spellcheck:false}).css(ad?h.input:h.inputWithNoHint);try{!ae.attr("dir")&&ae.attr("dir","auto")}catch(ab){}return ae.wrap(aa).parent().prepend(ad?Z:null).append(ac)}function A(Y){return{backgroundAttachment:Y.css("background-attachment"),backgroundClip:Y.css("background-clip"),backgroundColor:Y.css("background-color"),backgroundImage:Y.css("background-image"),backgroundOrigin:Y.css("background-origin"),backgroundPosition:Y.css("background-position"),backgroundRepeat:Y.css("background-repeat"),backgroundSize:Y.css("background-size")}}function x(Y){var Z=Y.find(".tt-input");r.each(Z.data(U),function(ab,aa){r.isUndefined(ab)?Z.removeAttr(aa):Z.attr(aa,ab)});Z.detach().removeData(U).removeClass("tt-input").insertAfter(Y);Y.remove()}}();(function(){var v,t,w;v=b.fn.typeahead;t="ttTypeahead";w={initialize:function x(E,D){D=r.isArray(D)?D:[].slice.call(arguments,1);E=E||{};return this.each(C);function C(){var H=b(this),F,G;r.each(D,function(I){I.highlight=!!E.highlight});G=new k({input:H,eventBus:F=new a({el:H}),withHint:r.isUndefined(E.hint)?true:!!E.hint,minLength:E.minLength,autoselect:E.autoselect,datasets:D});H.data(t,G)}},open:function y(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.open()}}},close:function B(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.close()}}},val:function u(C){return !arguments.length?E(this.first()):this.each(D);function D(){var G=b(this),F;if(F=G.data(t)){F.setVal(C)}}function E(H){var G,F;if(G=H.data(t)){F=G.getVal()}return F}},destroy:function A(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.destroy();E.removeData(t)}}}};b.fn.typeahead=function(C){if(w[C]){return w[C].apply(this,[].slice.call(arguments,1))}else{return w.initialize.apply(this,arguments)}};b.fn.typeahead.noConflict=function z(){b.fn.typeahead=v;return this}})()})(window.jQuery);